/**
 * @license angular-dirty-form v0.0.1
 * (c) 2015 Null McNull. https://github.com/McNull
 * License: MIT
 */
!function(n){"use strict";var r=n.module("dirtyForm",[]);r.constant("dirtyFormConfig",{message:"Discard unsaved changes?",confirm:null}),r.run(["$window","dirtyFormConfig",function(n,r){r.confirm=r.confirm||function(r){return n.confirm(r)}}]),r.directive("dirtyForm",["dirtyFormLinkFn",function(n){return{restrict:"AE",require:"^form",link:n}}]),r.factory("dirtyFormLinkFn",["dirtyFormConfig","$q","$location",function(n,r,i){return function(t,o,e,c){var f=n.message;e.$observe("dirtyForm",function(n){n&&(f=n)});var a=!1,u=!1;t.$on("$locationChangeStart",function(t,o){if(u)t.preventDefault();else if(c.$dirty&&!a){var e=n.confirm(f);if(e!==!0){t.preventDefault(),u=!0;var m=function(n){n&&(i.path(o),a=!0)};r.when(e).then(m)["catch"](function(){m(!1)})["finally"](function(){u=!1})}}})}}])}(angular);