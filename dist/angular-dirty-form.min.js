/**
 * @license angular-dirty-form v0.0.2
 * (c) 2015 Null McNull. https://github.com/McNull
 * License: MIT
 */
!function(n,r){"use strict";var i=n.module("dirtyForm",[]);i.constant("dirtyFormConfig",{message:"Discard unsaved changes?",confirm:null}),i.run(["$window","dirtyFormConfig",function(n,r){r.confirm=r.confirm||function(r){return n.confirm(r)}}]),i.directive("dirtyForm",["dirtyFormLinkFn",function(n){return{restrict:"AE",require:"^form",link:n}}]),i.factory("dirtyFormLinkFn",["dirtyFormConfig","$q","$location",function(n,r,i){return function(t,o,e,c){var f=!1,a=!1;t.$on("$locationChangeStart",function(t,o,u){if(a)t.preventDefault();else if(c.$dirty&&!f){var m=e.dirtyForm||n.message,d=n.confirm(m);if(d!==!0){t.preventDefault(),a=!0;var s=function(n){n&&(i.$$parse(o),f=!0)};r.when(d).then(s)["catch"](function(){s(!1)})["finally"](function(){a=!1})}}})}}])}(angular);